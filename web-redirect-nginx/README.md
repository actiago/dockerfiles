# Nginx web redirect container

Container com Nginx para redirecionamento de URI's no Azure.

### Requisitos

Considerando que você já tenha o [WSL-2](https://docs.microsoft.com/en-us/windows/wsl/install) instalado no seu Windows.

- Linux
- Docker
- Docker Compose

### Arquivo Dockerfile

```Dockerfile
FROM alpine:3.5

# install nginx and nginx echo module
RUN apk add -u --no-cache nginx nginx-mod-http-echo

COPY files/root /

EXPOSE 80

CMD ["nginx"]
```

### Caminho do arquivo de configuração

```files/root/etc/nginx/conf.d/default.conf```

### Testando localmente

1. Adicione os domínios no arquivo /etc/hosts do seu Linux

Ex:

```bash
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateHosts = false
127.0.0.1       localhost
127.0.1.1       contoso_00_laptop000.contoso.local     contoso_00_laptop000
127.0.0.1       contosocontoso.com.br
```

2. Copie este repositório para seu dispositivo

```bash
git clone ssh://git@git.contoso.local:10022/Infra/web-redirect-container.git
```

3. Crie um novo arquivo de nome docker-compose.yml e use:

```yaml
version: '3'

services:
  nginx1:
    build: .
    networks:
      - web
    ports:
      - "80:80"

networks:
  web:
    external: true
```

4. Execute

```bash
docker-compose up --build -d
```

5. Teste a aplicação

```bash
curl -s -L -D - http://contosocontoso.com.br -o /dev/null -w '%{url_effective}'
```

*Obs*: Caso queira testar no navegador, edite o arquivo hosts do Windows e aponte a entrada desejada para o seu localhost.

## VERSÃO

v0.1
